<div class="products-container">
  
  <!-- Header Card -->
  <div class="header-card">
    <div class="header-content">
      <div class="header-title">
        <span class="icon">üì¶</span>
        <h1>Lista de Productos</h1>
      </div>
      <button class="btn-primary" routerLink="/products/create">
        <span class="btn-icon">‚ûï</span>
        Nuevo Producto
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="state-card loading-state">
    <div class="spinner"></div>
    <p>Cargando productos...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && products.length === 0" class="state-card empty-state">
    <span class="state-icon">üì≠</span>
    <h3>No hay productos registrados</h3>
    <p>Comienza agregando tu primer producto</p>
  </div>

  <!-- Products Table -->
  <div *ngIf="!loading && products.length > 0" class="table-card">
    <div class="table-wrapper">
      <table class="products-table">
        <thead>
          <tr>
            <th class="col-id">ID</th>
            <th class="col-name">Nombre</th>
            <th class="col-description">Descripci√≥n</th>
            <th class="col-price">Precio</th>
            <th class="col-date">Fecha Creaci√≥n</th>
            <th class="col-actions">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <!-- CAMBIO: usar paginatedProducts en lugar de products -->
          <tr *ngFor="let p of paginatedProducts" class="product-row">
            <td data-label="ID" class="cell-id">
              <span class="id-badge">{{ p.id }}</span>
            </td>
            <td data-label="Nombre" class="cell-name">
              <span class="product-name">{{ p.name }}</span>
            </td>
            <td data-label="Descripci√≥n" class="cell-description">
              {{ p.description }}
            </td>
            <td data-label="Precio" class="cell-price">
              <span class="price-tag">${{ p.price }}</span>
            </td>
            <td data-label="Fecha" class="cell-date">
              {{ p.created_at ? (p.created_at | date:'short') : '‚Äî' }}
            </td>
            <td data-label="Acciones" class="cell-actions">
              <div class="action-buttons">
                <button class="btn-edit" [routerLink]="['/products/edit', p.id]">
                  <span class="btn-icon">‚úèÔ∏è</span>
                  <span class="btn-text">Editar</span>
                </button>
                <button class="btn-delete" (click)="deleteProduct(p.id)">
                  <span class="btn-icon">üóëÔ∏è</span>
                  <span class="btn-text">Eliminar</span>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- NUEVO: PAGINACI√ìN -->
    <div class="pagination-container">
      <!-- Info de registros -->
      <div class="pagination-info">
        <span class="records-info">
          Mostrando {{ (currentPage - 1) * itemsPerPage + 1 }} - 
          {{ Math.min(currentPage * itemsPerPage, products.length) }} 
          de {{ products.length }} productos
        </span>
        
        <select 
          [value]="itemsPerPage" 
          (change)="onItemsPerPageChange($event)" 
          class="items-per-page-select">
          <option *ngFor="let option of itemsPerPageOptions" [value]="option">
            {{ option }} por p√°gina
          </option>
        </select>
      </div>

      <!-- Controles de paginaci√≥n -->
      <div class="pagination-controls">
        <!-- Primera p√°gina -->
        <button 
          (click)="goToPage(1)" 
          [disabled]="currentPage === 1"
          class="pagination-btn"
          title="Primera p√°gina">
          ‚èÆÔ∏è
        </button>
        
        <!-- P√°gina anterior -->
        <button 
          (click)="goToPage(currentPage - 1)" 
          [disabled]="currentPage === 1"
          class="pagination-btn"
          title="Anterior">
          ‚óÄÔ∏è
        </button>

        <!-- N√∫meros de p√°gina -->
        <button 
          *ngFor="let page of getPageNumbers()"
          (click)="goToPage(page)"
          [class.active]="page === currentPage"
          class="pagination-btn page-number">
          {{ page }}
        </button>

        <!-- P√°gina siguiente -->
        <button 
          (click)="goToPage(currentPage + 1)" 
          [disabled]="currentPage === totalPages"
          class="pagination-btn"
          title="Siguiente">
          ‚ñ∂Ô∏è
        </button>
        
        <!-- √öltima p√°gina -->
        <button 
          (click)="goToPage(totalPages)" 
          [disabled]="currentPage === totalPages"
          class="pagination-btn"
          title="√öltima p√°gina">
          ‚è≠Ô∏è
        </button>
      </div>
    </div>

  </div>

</div>